import * as path from "path";
import { InputFile } from "./inputFile.js";

export class TestFile {
  constructor(workdir, day, year, files) {
    this.fileName = path.join(workdir, this.createFileName(day));
    this.day = day;
    this.year = year;
    this.files = files;
  }

  createFileName(dayOfMonth) {
    return `day${dayOfMonth}.test.js`;
  }

  getInputFileName() {
    return this.files.find(f => f instanceof InputFile).fileName;
  }
  
  createFileContents() {
    return `// generated by prepare script
import { part1, part2 } from "./day${this.day}";
import input from "./input.json";

describe("${this.year} - Day ${this.day}", () => {
  describe("Part 1", () => {
    it("returns the expected result", () => {
      expect(part1(input)).toEqual(true);
    });
  });

  describe.skip("Part 2", () => {
    it("returns the expected result", () => {
      expect(part2(input)).toEqual(true);
    });
  });
});\n`;
  }
}
